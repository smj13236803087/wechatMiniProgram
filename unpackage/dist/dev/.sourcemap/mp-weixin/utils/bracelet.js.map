{"version":3,"file":"bracelet.js","sources":["utils/bracelet.js"],"sourcesContent":["// 手串相关工具函数\n\n// 计算手串总价\nexport function calculateTotalPrice(items) {\n  return items.reduce((total, item) => total + (item.price || 0), 0)\n}\n\n// 生成唯一ID\nexport function generateId() {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n}\n\n// 解析直径字符串，如 \"6mm\" -> 6（毫米）\nexport function parseDiameter(diameterStr) {\n  if (!diameterStr) return undefined\n  \n  const match = diameterStr.match(/(\\d+\\.?\\d*)/)\n  if (match) {\n    return parseFloat(match[1])\n  }\n  return undefined\n}\n\n// 解析重量字符串，如 \"1.65g\" -> 1.65（克）\nexport function parseWeight(weightStr) {\n  if (!weightStr) return undefined\n  \n  const match = weightStr.match(/(\\d+\\.?\\d*)/)\n  if (match) {\n    return parseFloat(match[1])\n  }\n  return undefined\n}\n\n// 从商品数据中获取图片\nexport function getProductImage(product) {\n  if (product.image && product.image.src) {\n    return product.image.src\n  }\n  if (product.images && product.images.length > 0) {\n    return product.images[0].src\n  }\n  return ''\n}\n\n// 获取商品价格\nexport function getProductPrice(product) {\n  if (product.variants && product.variants.length > 0) {\n    return parseFloat(product.variants[0].price) || 0\n  }\n  return 0\n}\n\n// 获取商品直径\nexport function getProductDiameter(product) {\n  if (!product.options || product.options.length === 0) {\n    return null\n  }\n  \n  const diameterOption = product.options.find(\n    (opt) => opt.name.toLowerCase().trim() === 'diameter'\n  )\n  \n  if (diameterOption && diameterOption.values && diameterOption.values.length > 0) {\n    return diameterOption.values[0].trim()\n  }\n  \n  return null\n}\n\n// 获取商品重量\nexport function getProductWeight(product) {\n  if (!product.options || product.options.length === 0) {\n    return null\n  }\n  \n  const weightOption = product.options.find(\n    (opt) => opt.name.toLowerCase().trim() === 'weight'\n  )\n  \n  if (weightOption && weightOption.values && weightOption.values.length > 0) {\n    return weightOption.values[0].trim()\n  }\n  \n  return null\n}\n\n// 将商品按 product_type 分类\nexport function categorizeProducts(products) {\n  const categorized = {\n    obsidian: { category: 'obsidian', name: '曜石', products: [] },\n    amethyst: { category: 'amethyst', name: '紫水晶', products: [] },\n    moonshine: { category: 'moonstone', name: '月光', products: [] },\n    cutoff: { category: 'spacer', name: '隔断', products: [] },\n    'double-pointed-crystal': { category: 'doubleTerminated', name: '双尖水晶', products: [] },\n    'running-laps': { category: 'decoration', name: '跑环', products: [] },\n    pendant: { category: 'pendant', name: '吊坠', products: [] }\n  }\n  \n  products.forEach((product) => {\n    const productType = (product.product_type || '').toLowerCase()\n    if (productType in categorized) {\n      categorized[productType].products.push(product)\n    }\n  })\n  \n  return categorized\n}\n"],"names":[],"mappings":";AAGO,SAAS,oBAAoB,OAAO;AACzC,SAAO,MAAM,OAAO,CAAC,OAAO,SAAS,SAAS,KAAK,SAAS,IAAI,CAAC;AACnE;AAGO,SAAS,aAAa;AAC3B,SAAO,GAAG,KAAK,IAAG,CAAE,IAAI,KAAK,OAAQ,EAAC,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC;AACjE;AAGO,SAAS,cAAc,aAAa;AACzC,MAAI,CAAC;AAAa,WAAO;AAEzB,QAAM,QAAQ,YAAY,MAAM,aAAa;AAC7C,MAAI,OAAO;AACT,WAAO,WAAW,MAAM,CAAC,CAAC;AAAA,EAC3B;AACD,SAAO;AACT;AAGO,SAAS,YAAY,WAAW;AACrC,MAAI,CAAC;AAAW,WAAO;AAEvB,QAAM,QAAQ,UAAU,MAAM,aAAa;AAC3C,MAAI,OAAO;AACT,WAAO,WAAW,MAAM,CAAC,CAAC;AAAA,EAC3B;AACD,SAAO;AACT;AAGO,SAAS,gBAAgB,SAAS;AACvC,MAAI,QAAQ,SAAS,QAAQ,MAAM,KAAK;AACtC,WAAO,QAAQ,MAAM;AAAA,EACtB;AACD,MAAI,QAAQ,UAAU,QAAQ,OAAO,SAAS,GAAG;AAC/C,WAAO,QAAQ,OAAO,CAAC,EAAE;AAAA,EAC1B;AACD,SAAO;AACT;AAGO,SAAS,gBAAgB,SAAS;AACvC,MAAI,QAAQ,YAAY,QAAQ,SAAS,SAAS,GAAG;AACnD,WAAO,WAAW,QAAQ,SAAS,CAAC,EAAE,KAAK,KAAK;AAAA,EACjD;AACD,SAAO;AACT;AAGO,SAAS,mBAAmB,SAAS;AAC1C,MAAI,CAAC,QAAQ,WAAW,QAAQ,QAAQ,WAAW,GAAG;AACpD,WAAO;AAAA,EACR;AAED,QAAM,iBAAiB,QAAQ,QAAQ;AAAA,IACrC,CAAC,QAAQ,IAAI,KAAK,YAAa,EAAC,KAAI,MAAO;AAAA,EAC5C;AAED,MAAI,kBAAkB,eAAe,UAAU,eAAe,OAAO,SAAS,GAAG;AAC/E,WAAO,eAAe,OAAO,CAAC,EAAE,KAAM;AAAA,EACvC;AAED,SAAO;AACT;AAGO,SAAS,iBAAiB,SAAS;AACxC,MAAI,CAAC,QAAQ,WAAW,QAAQ,QAAQ,WAAW,GAAG;AACpD,WAAO;AAAA,EACR;AAED,QAAM,eAAe,QAAQ,QAAQ;AAAA,IACnC,CAAC,QAAQ,IAAI,KAAK,YAAa,EAAC,KAAI,MAAO;AAAA,EAC5C;AAED,MAAI,gBAAgB,aAAa,UAAU,aAAa,OAAO,SAAS,GAAG;AACzE,WAAO,aAAa,OAAO,CAAC,EAAE,KAAM;AAAA,EACrC;AAED,SAAO;AACT;AAGO,SAAS,mBAAmB,UAAU;AAC3C,QAAM,cAAc;AAAA,IAClB,UAAU,EAAE,UAAU,YAAY,MAAM,MAAM,UAAU,GAAI;AAAA,IAC5D,UAAU,EAAE,UAAU,YAAY,MAAM,OAAO,UAAU,GAAI;AAAA,IAC7D,WAAW,EAAE,UAAU,aAAa,MAAM,MAAM,UAAU,GAAI;AAAA,IAC9D,QAAQ,EAAE,UAAU,UAAU,MAAM,MAAM,UAAU,GAAI;AAAA,IACxD,0BAA0B,EAAE,UAAU,oBAAoB,MAAM,QAAQ,UAAU,GAAI;AAAA,IACtF,gBAAgB,EAAE,UAAU,cAAc,MAAM,MAAM,UAAU,GAAI;AAAA,IACpE,SAAS,EAAE,UAAU,WAAW,MAAM,MAAM,UAAU,GAAI;AAAA,EAC3D;AAED,WAAS,QAAQ,CAAC,YAAY;AAC5B,UAAM,eAAe,QAAQ,gBAAgB,IAAI,YAAa;AAC9D,QAAI,eAAe,aAAa;AAC9B,kBAAY,WAAW,EAAE,SAAS,KAAK,OAAO;AAAA,IAC/C;AAAA,EACL,CAAG;AAED,SAAO;AACT;;;;;;;;;;"}